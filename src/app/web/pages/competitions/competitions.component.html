<div class="container py-4" dir="rtl">
  <h1 class="h2 text-center mb-4">مسابقات</h1>

  <!-- Loading Spinner -->
  <div *ngIf="loading" class="d-flex justify-content-center my-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">در حال بارگذاری...</span>
    </div>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="alert alert-danger text-center my-4" role="alert">
    خطا در بارگذاری مسابقات. لطفا دوباره تلاش کنید.
  </div>

  <!-- Competitions Grid -->
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    <div *ngFor="let competition of competitions" class="col">
      <div class="card h-100 shadow-sm hover-lift">
        <div class="card-img-top position-relative" style="height: 200px;">
          <app-image
            [fileId]="competition.bannerImageId"
            [altText]="competition.title"
            className="img-fluid w-100 h-100"
          />
        </div>
        <div class="card-body p-3">
          <h2 class="card-title h5 mb-3">{{ competition.title }}</h2>
          <div class="d-flex flex-column gap-2 mb-3">
            <div class="d-flex justify-content-between small">
              <span class="fw-medium">تاریخ:</span>
              <span>{{ competition.date | persianDate:'jYYYY/jMM/jDD' }}</span>
            </div>
            <div class="d-flex justify-content-between small">
              <span class="fw-medium">وضعیت:</span>
              <span class="badge rounded-pill px-3 {{ getStatusBadgeClass(competition.status) }}">
                {{ getStatusText(competition.status) }}
              </span>
            </div>
          </div>
          <a [routerLink]="['/competition', competition.id]" class="btn btn-primary w-100">
            مشاهده جزئیات
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .hover-lift {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  .hover-lift:hover {
    transform: translateY(-5px);
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;
  }
</style>
